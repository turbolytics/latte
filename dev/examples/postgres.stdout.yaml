name: daily_signups

metric:
  name: core.users.signups.total
  type: COUNT

schedule:
  interval: 24h

source:
  type: postgres
  config:
    uri: 'postgresql://test@test:localhost'
    sql: |
      SELECT 
        account as customer,
        COUNT(*) as value,
      FROM 
        users
      WHERE 
        users.signup_time >= NOW() - INTERVAL '1 DAY'
      
sinks:
  console:
    type: console
    config:
      target: stdout
